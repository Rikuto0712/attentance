<!DOCTYPE html>
<!-- HTML5 ドキュメントであることを宣言する。 -->
<html lang="ja" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!-- HTML タグ開始。lang="ja" は日本語ページであることを示す。 -->
<!-- xmlns:th は Thymeleaf の属性を使うための名前空間宣言。
-->
<!-- xmlns:sec は Spring Security 用の拡張属性を使うための名前空間宣言。
-->
<head>
<meta charset="UTF-8">
<!-- 文字エンコーディングを UTF-8 に設定。
-->
<title>修正依頼一覧 - 勤怠管理システム</title>
<!-- ブラウザタブに表示されるタイトルを設定。
-->
<link rel="stylesheet" th:href="@{/css/style.css}">
<!-- CSS スタイルシートのリンクを設定。
-->
<!-- th:href を使うことで Thymeleaf でパスを解決する。 -->
</head>
<body>
<div class="container">
<!-- 中央寄せでコンテンツを囲む div。
-->
<h1>修正依頼一覧</h1>
<!-- ページのメインタイトル。 -->
<p>未承認の勤怠修正依頼です。</p>
<!-- ページの説明テキスト。 -->
<div th:if="${param.success}" class="success-message">
<!-- クエリパラメータに success が含まれている場合に表示するメッセージブロック。
-->
<span th:if="${param.success == 'approved'}">修正依頼が承認されました。</span>
<!-- 修正依頼承認時のメッセージを表示。 -->
<span th:if="${param.success == 'rejected'}">修正依頼が却下されました。</span>
<!-- 修正依頼却下時のメッセージを表示。 -->
</div>
<table>
<thead>
<tr>
<th>ID</th>
<th>依頼者</th>
<th>対象勤怠 ID</th>
<th>依頼日</th>
<th>新出勤</th>
<th>新退勤</th>
<th>新休憩開始</th>
<th>新休憩終了</th>
<th>理由</th>
<th>ステータス</th>
<th>操作</th>
</tr>
<tbody>
<tr th:each="request : ${fixRequests}">
<!-- 修正依頼のリストを繰り返し表示する。 -->
<td th:text="${request.id}"></td>
<!-- 修正依頼 ID を表示する。 -->
<td th:text="${request.user.username}"></td>
<!-- 修正依頼者のユーザー名を表示する。 -->
<td th:text="${request.attendance.id}"></td>
<!-- 対象の勤怠 ID を表示する。 -->
<td th:text="${request.requestDate}"></td>
<!-- 修正依頼日を表示する。 -->
<td th:text="${request.newCheckInTime}"></td>
<!-- 新しい出勤時間を表示する。 -->
<td th:text="${request.newCheckOutTime}"></td>
<!-- 新しい退勤時間を表示する。 -->
<td th:text="${request.newBreakStartTime}"></td>
<!-- 新しい休憩開始時間を表示する。 -->
<td th:text="${request.newBreakEndTime}"></td>
<!-- 新しい休憩終了時間を表示する。 -->
<td th:text="${request.reason}"></td>
<!-- 修正理由を表示する。 -->
<td th:text="${request.status}"></td>
<!-- 修正依頼のステータスを表示する。 -->
<td>
style="display:inline;">
<form th:action="@{/admin/fix-requests/{id}/approve(id=${request.id})}" method="post"style="display:inline;">
<!-- 修正依頼承認用フォーム。 -->
<button type="submit" class="button">承認</button>
</form>
<form th:action="@{/admin/fix-requests/{id}/reject(id=${request.id})}" method="post"
style="display:inline;">
<!-- 修正依頼却下用フォーム。 -->
<button type="submit" class="button danger">却下</button>
</form>
</td>
</tr>
<tr th:if="${#lists.isEmpty(fixRequests)}">
<!-- 修正依頼が 0 件の場合に表示する行。
-->
<td colspan="11">修正依頼はありません。</td>
</tr>
</tbody>
</table>
<div class="button-group">
<!-- ボタンをまとめる div。
-->
<a th:href="@{/dashboard}" class="button secondary">ダッシュボードに戻る</a>
<!-- ダッシュボードに戻るリンクボタン。 -->
</div>
</div>
</body>
</html>